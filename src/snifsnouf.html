<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=0.0">

    <title>Titre de l'onglet</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body onload="generateLinks()">
        <h1>Super Giveaway</h1>
        <button onclick="generateLinks()">Rafraichir les liens</button>
        <p>Pour tout ouvir d'un coup merci d'utiliser le bot</p>
        <br>
        <br>
        <div id="linksContainer"></div>
   
    
</body>

<script type="module">
    // Import Firebase modules
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js';
    import { getDatabase, ref, get } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-database.js';

    // Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyBXKlCJFnIlNImXYaaiQ6cyp8x1nuFsX-k",
        authDomain: "snifsnoufdataconnect.firebaseapp.com",
        databaseURL: "https://snifsnoufdataconnect-default-rtdb.europe-west1.firebasedatabase.app/",
        projectId: "snifsnoufdataconnect",
        storageBucket: "snifsnoufdataconnect.appspot.com",
        messagingSenderId: "798907181327",
        appId: "1:798907181327:web:7a3efc45169cc96bf0767a"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    let urls = []
    // Function to generate links
    window.generateLinks = function() {
        // Get data from the root of the Firebase database
        get(ref(database, '/'))
            .then((snapshot) => {
                if (snapshot.exists()) {
                    const linksContainer = document.getElementById('linksContainer');
                    linksContainer.innerHTML = ''; // Clear previous links

                    const data = snapshot.val();

                    // Iterate over each key-value pair in the root
                    for (const key in data) {
                        if (data.hasOwnProperty(key)) {
                            const urlSuffix = data[key];
                            const url = `https://www.instant-gaming.com/fr/giveaway/${urlSuffix}`;
                            urls.push(url)
                            const imgSrc = 'https://gaming-cdn.com/images/avatars/16693760-1689603180.jpg';

                            // Create the <a> element
                            const aTag = document.createElement('a');
                            aTag.className = 'giveaway';
                            aTag.href = url;
                            aTag.target = '_blank';
                            aTag.rel = 'noreferrer';

                            // Create the <img> element
                            const imgTag = document.createElement('img');
                            imgTag.src = imgSrc;
                            imgTag.width = 76;
                            imgTag.height = 76;

                            // Append the <img> to the <a>, and the <a> to the container
                            aTag.appendChild(imgTag);
                            linksContainer.appendChild(aTag);
                        }
                    }
                } else {
                    document.getElementById('linksContainer').textContent = 'No data available';
                }
            })
            .catch((error) => document.getElementById('linksContainer').textContent = 'Error: ' + error.message);
    }

     // Function to open all links
     window.openAllLinks = function() {
        for(var i = 0; i < urls.length;i++){
            chrome.tabs.create({url:urls[i]})
        }
            
    }
</script>


</html>